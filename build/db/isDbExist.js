"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isDbExist=void 0;const db_1=require("../db"),utils_1=require("../utils"),createDB_1=require("./createDB"),isDbExist=async()=>await db_1.db.raw("select 1+1 as result").then(()=>!0).catch(async e=>!("3D000"!=e.code||!process.env.NODE_ENV)&&((0,utils_1.message)("ENV","create DATABASE",process.env.PGDATABASE),(0,createDB_1.createDB)({host:process.env.PGHOST,user:process.env.PGUSER,password:process.env.PGPASSWORD,database:process.env.PGDATABASE,port:Number(process.env.PGPORT)}).then(()=>((0,utils_1.message)("ENV","create DATABASE","OK"),!0)).catch(()=>((0,utils_1.message)("ERROR","create DATABASE","ERROR"),!1))));exports.isDbExist=isDbExist;